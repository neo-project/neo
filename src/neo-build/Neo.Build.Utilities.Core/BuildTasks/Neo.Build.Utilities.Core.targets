<Project>

  <Target Name="NeoBuildUpdateToolSetEvent" BeforeTargets="CoreCompile">
    <Exec Condition=" '$(NeoBuildToolSource)' != '' AND '$(NeoBuildToolPath)' != '' " Command="dotnet tool update $(NeoBuildToolPackageName) --source &quot;$(NeoBuildToolSource)&quot; --tool-path &quot;$(NeoBuildToolPath)&quot; --version $(NeoBuildVersion)" />
    <Exec Condition=" '$(NeoBuildToolSource)' != '' AND '$(NeoBuildToolPath)' == '' " Command="dotnet tool update $(NeoBuildToolPackageName) --source &quot;$(NeoBuildToolSource)&quot; --version $(NeoBuildVersion)" />
    <Exec Condition=" '$(NeoBuildToolSource)' == '' AND '$(NeoBuildToolPath)' != '' " Command="dotnet tool update $(NeoBuildToolPackageName) --tool-path &quot;$(NeoBuildToolPath)&quot; --version $(NeoBuildVersion)" />
    <Exec Condition=" '$(NeoBuildToolSource)' == '' AND '$(NeoBuildToolPath)' == '' "  Command="dotnet tool update $(NeoBuildToolPackageName) --version $(NeoBuildVersion)" />
  </Target>
  
  <Target Name="Build" DependsOnTargets="NeoBuildUpdateToolSetEvent">
    <NeoWallet Password="$(NeoWalletPassword)" ProtocolAddressVersion="$(NeoProtocolAddressVersion)" File="$(NeoWalletFileFullPath)" />
  </Target>

  <Target Name="AfterClean">
    <Delete Files="$(NeoWalletFileFullPath)" />
  </Target>
</Project>
